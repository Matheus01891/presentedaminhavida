<script>
        var tag = document.createElement('script');
        tag.src = "https://www.youtube.com/iframe_api";
        var firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

        var player;
        function onYouTubeIframeAPIReady() {
            player = new YT.Player('player', {
                height: '0',
                width: '0',
                videoId: 'w4q-antIDz0',
                playerVars: {
                    'start': 79,
                    'playsinline': 1,
                    'controls': 0,
                    'disablekb': 1,
                    'origin': window.location.origin
                },
                events: {
                    'onReady': onPlayerReady
                }
            });
        }

        function onPlayerReady(event) {
            // Player pronto para receber o comando de play
        }

        function criarDecoracao() {
            const container = document.body;
            setInterval(() => {
                const escolhe = Math.random();
                const el = document.createElement('div');
                el.className = 'decoracao';
                if (escolhe > 0.5) {
                    el.innerHTML = `<svg class="amora-svg" viewBox="0 0 100 100"><circle cx="50" cy="60" r="35" fill="#800080" /><circle cx="35" cy="45" r="15" fill="#800080" /><circle cx="65" cy="45" r="15" fill="#800080" /><circle cx="50" cy="30" r="15" fill="#800080" /><path d="M40 25 Q50 10 60 25" stroke="#228B22" stroke-width="8" fill="none" /><circle cx="40" cy="55" r="4" fill="white" /><circle cx="60" cy="55" r="4" fill="white" /><path d="M45 70 Q50 75 55 70" stroke="white" stroke-width="2" fill="none" /></svg>`;
                } else {
                    el.innerHTML = '<span style="color:#ff4d6d; font-size:30px;">❤️</span>';
                }
                el.style.left = Math.random() * 100 + 'vw';
                el.style.animationDuration = (Math.random() * 3 + 4) + 's';
                container.appendChild(el);
                setTimeout(() => el.remove(), 7000);
            }, 500);
        }

        function soltarFogos() {
            for(let i=0; i<60; i++) {
                const f = document.createElement('div');
                f.className = 'fogo';
                f.style.left = '50%'; f.style.top = '50%';
                f.style.backgroundColor = `hsl(${Math.random() * 360}, 100%, 70%)`;
                document.body.appendChild(f);
                const angle = Math.random() * Math.PI * 2;
                const velocity = Math.random() * 300 + 100;
                f.animate([
                    { transform: 'translate(0, 0)', opacity: 1 },
                    { transform: `translate(${Math.cos(angle)*velocity}px, ${Math.sin(angle)*velocity}px)`, opacity: 0 }
                ], { duration: 1500, easing: 'ease-out' });
                setTimeout(() => f.remove(), 1500);
            }
        }

        function revelarTudo() {
            // Força o play no celular de forma mais agressiva
            if (player && player.playVideo) {
                player.setVolume(100);
                player.playVideo();
                
                // Tenta novamente após 500ms se o celular tiver bloqueado
                setTimeout(() => {
                    if (player.getPlayerState() !== 1) {
                        player.playVideo();
                    }
                }, 500);
            }

            document.getElementById('mural').style.display = 'block';
            document.getElementById('main-btn').style.display = 'none';
            document.getElementById('box').style.transform = 'scale(0.8)';
            
            soltarFogos();
            window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
        }
        
        criarDecoracao();
    </script>
